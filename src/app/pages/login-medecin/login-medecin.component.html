<div class="page-container">

  <div class="form-card">
    <button class="btn-rollback-left" (click)="goHome()" title="Retour">
      <i class="fas fa-sign-out"></i>
    </button>
  
    <h2>{{ isLoginMode ? 'Connexion Médecin' : 'Inscription Médecin' }}</h2>
    <form [formGroup]="authForm" (ngSubmit)="onSubmit()">
      
      <!-- Nom (inscription uniquement) -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Nom</label>
        <input formControlName="nom" type="text" />
        <div class="error" *ngIf="f['nom'].touched && f['nom'].invalid">
          <small *ngIf="f['nom'].errors?.['required']">Nom requis</small>
        </div>
      </div>
  
      
      <!-- Prénom (inscription uniquement) -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Prénom</label>
        <input formControlName="prenom" type="text" />
        <div class="error" *ngIf="f['prenom'].touched && f['prenom'].invalid">
          <small *ngIf="f['prenom'].errors?.['required']">Prénom requis</small>
        </div>
      </div>

      <!-- Spécialité (inscription uniquement) -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Spécialité</label>
        <select formControlName="specialite">
          <option value="Généraliste">Généraliste</option>
          <option value="Cardiologue">Cardiologue</option>
          <option value="Dermatologue">Dermatologue</option>
          <option value="Pédiatre">Pédiatre</option>
          <option value="Ophtalmologue">Ophtalmologue</option>
          <option value="Psychiatre">Psychiatre</option>
          <option value="Gynécologue">Gynécologue</option>
        </select>
        <div class="error" *ngIf="f['specialite'].touched && f['specialite'].invalid">
          <small *ngIf="f['specialite'].errors?.['required']">Spécialité requise</small>
        </div>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label>Email</label>
        <input formControlName="email" type="email" />
        <div class="error" *ngIf="f['email'].touched && f['email'].invalid">
          <small *ngIf="f['email'].errors?.['required']">Email requis</small>
          <small *ngIf="f['email'].errors?.['pattern']">Email invalide</small>
        </div>
      </div>

      <!-- Mot de passe -->
      <div class="form-group">
        <label>Mot de passe</label>
        <input formControlName="password" type="password" />
        <div class="error" *ngIf="f['password'].touched && f['password'].invalid">
          <span *ngIf="f['password'].errors?.['required']">Mot de passe requis</span>
          <span *ngIf="f['password'].errors?.['minlength']">Minimum 6 caractères</span>
        </div>
      </div>

      <!-- Confirmation (si inscription) -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Confirmer le mot de passe</label>
        <input formControlName="confirmPassword" type="password" />
        <div class="error" *ngIf="f['confirmPassword'].touched && f['confirmPassword'].invalid">
          <span *ngIf="f['confirmPassword'].errors?.['required']">Confirmation requise</span>
          <span *ngIf="f['confirmPassword'].errors?.['mismatch']">Les mots de passe ne correspondent pas</span>
        </div>
      </div>

      <button type="submit">{{ isLoginMode ? 'Se connecter' : 'S’inscrire' }}</button>
    </form>

    <p class="toggle">
      {{ isLoginMode ? 'Pas encore de compte ?' : 'Déjà inscrit ?' }}
      <a (click)="toggleMode()">{{ isLoginMode ? 'Créer un compte' : 'Se connecter' }}</a>
    </p>
  </div>
</div>
