<div class="page-container">
  <div class="form-card">
    <h2>{{ isLoginMode ? 'Connexion Patient' : 'Inscription Patient' }}</h2>

    <form [formGroup]="authForm" (ngSubmit)="onSubmit()">

      <!-- Nom -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Nom</label>
        <input formControlName="nom" type="text" />
        <div class="error" *ngIf="f['nom']?.touched && f['nom']?.invalid">
          <small *ngIf="f['nom'].errors?.['required']">Nom requis</small>
        </div>
      </div>

      <!-- Prénom -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Prénom</label>
        <input formControlName="prenom" type="text" />
        <div class="error" *ngIf="f['prenom']?.touched && f['prenom']?.invalid">
          <small *ngIf="f['prenom'].errors?.['required']">Prénom requis</small>
        </div>
      </div>

      <!-- Date de naissance -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Date de naissance</label>
        <input formControlName="dateNaissance" type="date" />
        <div class="error" *ngIf="f['dateNaissance']?.touched && f['dateNaissance']?.invalid">
          <small *ngIf="f['dateNaissance'].errors?.['required']">Date de naissance requise</small>
        </div>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label>Email</label>
        <input formControlName="email" type="email" />
        <div class="error" *ngIf="f['email']?.touched && f['email']?.invalid">
          <small *ngIf="f['email'].errors?.['required']">Email requis</small>
          <small *ngIf="f['email'].errors?.['pattern']">Email invalide</small>
        </div>
      </div>

      <!-- Mot de passe -->
      <div class="form-group">
        <label>Mot de passe</label>
        <input formControlName="password" type="password" />
        <div class="error" *ngIf="f['password']?.touched && f['password']?.invalid">
          <small *ngIf="f['password'].errors?.['required']">Mot de passe requis</small>
          <small *ngIf="f['password'].errors?.['minlength']">Minimum 6 caractères</small>
        </div>
      </div>

      <!-- Confirmation -->
      <div class="form-group" *ngIf="!isLoginMode">
        <label>Confirmer le mot de passe</label>
        <input formControlName="confirmPassword" type="password" />
        <div class="error" *ngIf="f['confirmPassword']?.touched && f['confirmPassword']?.invalid">
          <small *ngIf="f['confirmPassword'].errors?.['required']">Confirmation requise</small>
          <small *ngIf="f['confirmPassword'].errors?.['mismatch']">Les mots de passe ne correspondent pas</small>
        </div>
      </div>

      <button  type="submit">{{ isLoginMode ? 'Se connecter' : 'S’inscrire' }}</button>
    </form>
    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>
    
    <p class="toggle">
      {{ isLoginMode ? 'Pas encore de compte ?' : 'Déjà inscrit ?' }}
      <a (click)="toggleMode()">{{ isLoginMode ? 'Créer un compte' : 'Se connecter' }}</a>
    </p>
  </div>

</div>
